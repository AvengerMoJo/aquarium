<div class="glass-deployment-page"
     fxLayout="column"
     fxLayoutAlign="center center">
  <mat-card>
    <mat-card-header>
      <mat-card-title>Node deployment</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <mat-vertical-stepper linear="true" #deploymentStepper>
        <ng-template matStepperIcon="edit">
          <mat-icon>done</mat-icon>
        </ng-template>
        <mat-step>
          <div *ngIf="displayInventory"
               class="glass-deployment-page-step-content">
            <ng-template matStepLabel>Inventory</ng-template>
            <ng-container [ngTemplateOutlet]="inventory"></ng-container>
            <button mat-button
                    class="mat-stepper-next"
                    (click)="chooseDevices()">Choose selected devices</button>
          </div>
        </mat-step>
        <mat-step>
          <div class="glass-deployment-page-step-content">
            <ng-template matStepLabel>Services deployment</ng-template>
            <ng-container [ngTemplateOutlet]="services"></ng-container>
            <button mat-button
                    matStepperNext>Next</button>
          </div>
        </mat-step>
        <mat-step>
          <div class="glass-deployment-page-step-content">
            <ng-template matStepLabel>Summary</ng-template>
            <ng-container [ngTemplateOutlet]="summary"></ng-container>
            <button mat-icon-button
                    matTooltip="Back"
                    matStepperPrevious>
              <mat-icon svgIcon="mdi:arrow-left"></mat-icon>
            </button>
            <button mat-button
                    matStepperNext>Deploy</button>
          </div>
        </mat-step>
      </mat-vertical-stepper>
    </mat-card-content>
  </mat-card>
</div>

<ng-template #inventory>
  <table mat-table [dataSource]="devices"
         class="mat-elevation-z3">
    <ng-container matColumnDef="icon">
      <th mat-header-cell *matHeaderCellDef></th>
      <td mat-cell *matCellDef="let row">
        <mat-icon>storage</mat-icon>
      </td>
    </ng-container>
    <ng-container matColumnDef="path">
      <th mat-header-cell *matHeaderCellDef> Path </th>
      <td mat-cell *matCellDef="let row"> {{ row.path }} </td>
    </ng-container>
    <ng-container matColumnDef="type">
      <th mat-header-cell *matHeaderCellDef> Type </th>
      <td mat-cell *matCellDef="let row"> {{ row.human_readable_type }} </td>
    </ng-container>
    <ng-container matColumnDef="size">
      <th mat-header-cell *matHeaderCellDef> Size </th>
      <td mat-cell *matCellDef="let row"> {{ row.size | bytesToSize }} </td>
    </ng-container>
    <ng-container matColumnDef="available">
      <th mat-header-cell *matHeaderCellDef> Available </th>
      <td mat-cell *matCellDef="let row">
        <mat-icon *ngIf="row.available" style="color: green">
          done
        </mat-icon>
        <mat-icon *ngIf="!row.available" style="color: red">
          clear
        </mat-icon>
      </td>
    </ng-container>
    <tr mat-header-row *matHeaderRowDef="['icon', 'path', 'type', 'size', 'available']"></tr>
    <tr mat-row *matRowDef="let row; columns: ['icon', 'path', 'type', 'size', 'available'];"></tr>
  </table>
</ng-template>

<ng-template #services>
  <mat-accordion class="service-panel-align">
    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title>NFS</mat-panel-title>
        <mat-panel-description>
          Configure NFS service
          <mat-icon class="glass-color-accent" *ngIf="!nfs">
            add_circle_outline
          </mat-icon>
          <mat-icon class="glass-color-primary" *ngIf="nfs">
            check_circle_outline
          </mat-icon>
        </mat-panel-description>
      </mat-expansion-panel-header>
    </mat-expansion-panel>

    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title>iSCSI</mat-panel-title>
        <mat-panel-description>
          Configure iSCSI service
          <mat-icon class="glass-color-accent">
            add_circle_outline
          </mat-icon>
        </mat-panel-description>
      </mat-expansion-panel-header>
    </mat-expansion-panel>

    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title>CephFS</mat-panel-title>
        <mat-panel-description>
          Configure CephFS service
          <mat-icon class="glass-color-accent">
            add_circle_outline
          </mat-icon>
        </mat-panel-description>
      </mat-expansion-panel-header>
    </mat-expansion-panel>
  </mat-accordion>
</ng-template>

<ng-template #summary>
  Summary!!!
</ng-template>
